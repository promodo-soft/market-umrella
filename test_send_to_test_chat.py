#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
–ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç
"""

from telegram_bot import send_message
import logging
from datetime import datetime

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

def test_send_to_test_chat():
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤ —Ç–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç"""
    
    print("=== –¢–µ—Å—Ç –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ —Ç–µ—Å—Ç–æ–≤–∏–π —á–∞—Ç ===")
    
    # –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    test_message = f"""üß™ <b>–¢–ï–°–¢–û–í–ï –ü–û–í–Ü–î–û–ú–õ–ï–ù–ù–Ø</b>
üìÖ –î–∞—Ç–∞: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}

üìä <b>–¶–µ —Ç–µ—Å—Ç –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö</b>

‚úÖ –Ø–∫—â–æ –≤–∏ –±–∞—á–∏—Ç–µ —Ü–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —Ç–æ:
‚Ä¢ –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ Telegram API –ø—Ä–∞—Ü—é—î
‚Ä¢ –§—É–Ω–∫—Ü—ñ—è send_message –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ
‚Ä¢ test_mode=True –∫–æ—Ä–µ–∫—Ç–Ω–æ –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤—É—î —Ä–æ–±–æ—á—ñ —á–∞—Ç–∏

üéØ –¶–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –º–∞—î –ø—Ä–∏–π—Ç–∏ –¢–Ü–õ–¨–ö–ò –≤ —Ç–µ—Å—Ç–æ–≤–∏–π —á–∞—Ç.

‚è∞ <i>–ß–∞—Å –≤—ñ–¥–ø—Ä–∞–≤–∫–∏: {datetime.now().strftime('%H:%M:%S')}</i>"""

    print(f"üìù –¢–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:")
    print(test_message)
    print(f"\nüìè –î–æ–≤–∂–∏–Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: {len(test_message)} —Å–∏–º–≤–æ–ª—ñ–≤")
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
    print(f"\nüöÄ –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ —Ç–µ—Å—Ç–æ–≤–∏–π —á–∞—Ç...")
    result = send_message(test_message, parse_mode="HTML", test_mode=True)
    
    if result:
        print("‚úÖ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —Ç–µ—Å—Ç–æ–≤–∏–π —á–∞—Ç!")
    else:
        print("‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤—ñ–¥–ø—Ä–∞–≤—Ü—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è")
    
    return result

if __name__ == "__main__":
    success = test_send_to_test_chat()
    if not success:
        print("\nüí° –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏ –ø–æ–º–∏–ª–∫–∏:")
        print("   1. –í—ñ–¥—Å—É—Ç–Ω—ñ–π TELEGRAM_BOT_TOKEN")
        print("   2. –ü—Ä–æ–±–ª–µ–º–∏ –∑ –¥–æ—Å—Ç—É–ø–æ–º –¥–æ Telegram API")
        print("   3. –ù–µ–∫–æ—Ä–µ–∫—Ç–Ω—ñ ID —á–∞—Ç—ñ–≤ –≤ telegram_chats.json")
        print("   4. –ë–æ—Ç –Ω–µ –¥–æ–¥–∞–Ω–æ –≤ —Ç–µ—Å—Ç–æ–≤–∏–π —á–∞—Ç") 